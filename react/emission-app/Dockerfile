FROM node:18-alpine

WORKDIR .

COPY public/ ./public
COPY src/ ./src
COPY package.json .

RUN npm install

ARG REACT_APP_FASTAPI_PORT
ENV REACT_APP_FASTAPI_PORT $REACT_APP_FASTAPI_PORT
ARG REACT_APP_PORT
ENV REACT_APP_PORT $REACT_APP_PORT

CMD ["sh", "-c", "PORT=$REACT_APP_PORT npm start"]
